# Mihomo é…ç½®æ–‡ä»¶ç¤ºä¾‹
# å®Œæ•´é…ç½®è¯·å‚è€ƒ: https://wiki.metacubex.top/

# åŸºç¡€è®¾ç½®
mixed-port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info

# å¤–éƒ¨æ§åˆ¶å™¨ (ç”¨äº Metacubexd)
external-controller: 0.0.0.0:9090
secret: ""  # è®¾ç½®ä½ çš„å¯†ç 

# DNS è®¾ç½®
dns:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:7874
  ipv6: true
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "localhost.ptlogin2.qq.com"
  nameserver:
    - https://doh.pub/dns-query
    - https://223.5.5.5/dns-query
  fallback:
    - https://doh.pub/dns-query
    - tls://dns.google:853

# ä»£ç†èŠ‚ç‚¹ (ç¤ºä¾‹é…ç½®ï¼Œéœ€è¦æ›¿æ¢ä¸ºä½ è‡ªå·±çš„)
proxies:
  # æ·»åŠ ä½ çš„èŠ‚ç‚¹é…ç½®
  # - name: "èŠ‚ç‚¹1"
  #   type: ss
  #   server: example.com
  #   port: 443
  #   cipher: chacha20-ietf-poly1305
  #   password: "your-password"

# ä»£ç†ç»„
proxy-groups:
  - name: ğŸ”´ æ•…éšœåˆ‡æ¢
    type: select
    proxies:
      - ğŸ”µ è´Ÿè½½å‡è¡¡
      - ğŸŒ å›½å†…å¤–åˆ†æµ
      - ğŸ¯ ç›´è¿
      - â›”ï¸ æ‹¦æˆª

  - name: ğŸ”µ è´Ÿè½½å‡è¡¡
    type: load-balance
    strategy: round-robin
    proxies:
      - ğŸŒ å›½å†…å¤–åˆ†æµ
      - ğŸ¯ ç›´è¿
      - â›”ï¸ æ‹¦æˆª

  - name: ğŸŒ å›½å†…å¤–åˆ†æµ
    type: select
    proxies:
      - ğŸ¯ ç›´è¿
      - â›”ï¸ æ‹¦æˆª

  - name: ğŸ¯ ç›´è¿
    type: select
    proxies:
      - DIRECT

  - name: â›”ï¸ æ‹¦æˆª
    type: select
    proxies:
      - REJECT

  - name: ğŸªœ ä»£ç†
    type: select
    url: http://www.google.com/generate_204
    interval: 300
    proxies:
      - ğŸ”´ æ•…éšœåˆ‡æ¢
      - ğŸ”µ è´Ÿè½½å‡è¡¡
      - ğŸŒ å›½å†…å¤–åˆ†æµ
      - ğŸ¯ ç›´è¿

# è®¢é˜…æº (ç¤ºä¾‹)
# proxy-providers:
#   Provider1:
#     type: http
#     url: "https://example.com/sub1.yaml"
#     interval: 3600
#     path: ./proxies/sub1.yaml
#     health-check:
#       enable: true
#       url: http://www.google.com/generate_204
#       interval: 300

# è§„åˆ™
rules:
  # IPv6
  - IP-CIDR6,::1/128,ğŸ¯ ç›´è¿
  - IP-CIDR6,fe80::/10,ğŸ¯ ç›´è¿
  - IP-CIDR6,fc00::/7,ğŸ¯ ç›´è¿
  
  # å›½å†…å¸¸ç”¨
  - DOMAIN-SUFFIX,cn,ğŸ¯ ç›´è¿
  - DOMAIN-SUFFIX,baidu.com,ğŸ¯ ç›´è¿
  - DOMAIN-SUFFIX,aliyun.com,ğŸ¯ ç›´è¿
  - DOMAIN-SUFFIX,taobao.com,ğŸ¯ ç›´è¿
  - DOMAIN-SUFFIX,jd.com,ğŸ¯ ç›´è¿
  - DOMAIN-SUFFIX,163.com,ğŸ¯ ç›´è¿
  - DOMAIN-SUFFIX,qq.com,ğŸ¯ ç›´è¿
  
  # ä»£ç†è§„åˆ™
  - DOMAIN-SUFFIX,google.com,ğŸªœ ä»£ç†
  - DOMAIN-SUFFIX,github.com,ğŸªœ ä»£ç†
  - DOMAIN-SUFFIX,twitter.com,ğŸªœ ä»£ç†
  - DOMAIN-SUFFIX,facebook.com,ğŸªœ ä»£ç†
  - DOMAIN-SUFFIX,youtube.com,ğŸªœ ä»£ç†
  - DOMAIN-SUFFIX,netflix.com,ğŸªœ ä»£ç†
  
  # é»˜è®¤è§„åˆ™
  - GEOIP,CN,ğŸ¯ ç›´è¿
  - MATCH,ğŸ”´ æ•…éšœåˆ‡æ¢
